---
title: Go Slice 秘籍实战
date: 2011-04-04 19:25:27
tags: [Go,Pearl]
---

<br>

参考:

[[译]Go Slice 秘籍](https://colobu.com/2017/03/22/Slice-Tricks/)


<br>


---


### Cut 切掉一段数据

<br>

```go
a = append(a[:i], a[j:]...)
```

**切掉[i,j)之间的元素**

如:

```go
func cut() {

	//切掉一段数据
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}

	a = append(a[:1], a[4:]...)

	fmt.Println(a)
}

//------------
//[0 400 500 600 700 800 900 1000]
```

<br>

---

### Delete 删除某个元素

<br>

```go
a = append(a[:i], a[i+1:]...)
```

**删掉第i个元素**

```go
func delete() {

	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}
	a = append(a[:2], a[2+1:]...)

	fmt.Println(a)
}

//-----------
//[0 100 300 400 500 600 700 800 900 1000]
```

<br>


---

<br>

### Expand 插入一段到中间

<br>

```go
a = append(a[:i], append(make([]T, j), a[i:]...)...)
```

**a = append(a[:i], append(make([]T, j), a[i:]...)...)**

其中,i为插入的位置,j为插入元素的个数;

<font color="orange">即:在i位置后面,插入j个对应元素的空值</font>


```go
func expand() {
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}

	//i=4,j=8,i为插入的位置,j为插入的元素个数
	a = append(a[:4], append(make([]int, 8), a[4:]...)...)
	fmt.Println(a)
}

//------------
//[0 100 200 300 0 0 0 0 0 0 0 0 400 500 600 700 800 900 1000]
```


<br>


---

<br>

### Extend 插入一段到尾部

<br>

```go
a = append(a, make([]T, j)...)
```


**在原切片后面,插入j个对应元素的空值**


```go
func extend() {
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}

	a = append(a, make([]int, 3)...)
	fmt.Println(a)

}
//--------------
//[0 100 200 300 400 500 600 700 800 900 1000 0 0 0]
```



<br>


---

<br>

### Insert 插入某个元素到指定的位置

<br>


```go
a = append(a[:i], append([]T{x}, a[i:]...)...)
```

**在i位置处,插入(挤进)一个新元素x**


```go
func insert(){
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}
	//i=3,x=10086
	a = append(a[:3], append([]int{10086}, a[3:]...)...)
	fmt.Println(a)
}
//-----------
//[0 100 200 10086 300 400 500 600 700 800 900 1000]
```


---

<br>

### InsertVector 插入某个切片到指定的位置

<br>

```go
a = append(a[:i], append(b, a[i:]...)...)
```

**在i位置处,插入(挤进)一个(同类型的)新切片b**



```go
func insertvector() {

	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}

	b := []int{-280, -975, -764}

	//i=6
	a = append(a[:], append(b, a[6:]...)...)
	fmt.Println(a)

}

//-----------
//[0 100 200 300 400 500 600 700 800 900 1000 -280 -975 -764 600 700 800 900 1000]
```

---

<br>

### Pop 从切片中取出最后一个元素

<br>

```go
x, a := a[len(a)-1], a[:len(a)-1]
```

**从切片a中"切除"最后一个元素,返回最后一个元素x,和切除最后一个元素后的切片a**

<br>

append()的反操作

<br>

```go
func pop() {

	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}

	x, a := a[len(a)-1], a[:len(a)-1]
	fmt.Println(a)
	fmt.Println(x)

}
//------------------
//[0 100 200 300 400 500 600 700 800 900]
//1000
```


---

<br>

### Shift 从切片中"切除"第一个元素

<br>

```go
x, a := a[0], a[1:]
```

**从切片a中切除第一个元素,返回第一个元素x,和切除第一个元素之后的切片a**

<br>

```go
func shift() {
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}
	x, a := a[0], a[1:]
	fmt.Println(a)
	fmt.Println(x)
}
//------------
//[100 200 300 400 500 600 700 800 900 1000]
//0
```


---

<br>

### Unshift 从切片中"切除"第一个元素

<br>

```go
a = append([]T{x}, a...)
```
**将元素x插入到切片的开头**


也算是append()的反操作

<br>


```go
func unshift() {
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}
	//x为271828
	a = append([]int{271828}, a...)
	fmt.Println(a)

}
//------------------
//[271828 0 100 200 300 400 500 600 700 800 900 1000]
```




---

<br>

### Reverse 反转切片中的元素

<br>

```go
for i := len(a)/2-1; i >= 0; i-- {
	opp := len(a)-1-i
	a[i], a[opp] = a[opp], a[i]
}
```

或

```go
for left, right := 0, len(a)-1; left < right; left, right = left+1, right-1 {
	a[left], a[right] = a[right], a[left]
}
```

**反转切片中的元素**


<br>

```go
func reverse() {
	a := []int{0, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000}
	for i := len(a)/2 - 1; i >= 0; i-- {
		opp := len(a) - 1 - i
		a[i], a[opp] = a[opp], a[i]
	}
	fmt.Println(a)
}
//---------------
//[1000 900 800 700 600 500 400 300 200 100 0]
```


